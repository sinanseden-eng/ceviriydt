<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YDS Çeviri Teknikleri & Sonsuz Pratik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { sans: ['Inter', 'sans-serif'] },
                    colors: {
                        primary: { 50: '#eff6ff', 100: '#dbeafe', 500: '#3b82f6', 600: '#2563eb', 700: '#1d4ed8' },
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #0f172a; }
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(226, 232, 240, 0.8);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
        }
        .strategy-item { transition: all 0.3s ease; }
        .strategy-item:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05); }
        
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .loader-spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #3b82f6;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-10 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="p-2 bg-primary-100 text-primary-600 rounded-lg">
                    <i data-lucide="languages" class="w-6 h-6"></i>
                </div>
                <div>
                    <h1 class="text-xl font-bold text-slate-800 tracking-tight">YDS Master</h1>
                    <p class="text-xs text-slate-500 font-medium">Sonsuz Çeviri Soru Bankası</p>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <!-- Stats Counter -->
                <div class="hidden md:flex flex-col items-end">
                    <span class="text-[10px] uppercase tracking-wider text-slate-400 font-bold">Çözülen Soru</span>
                    <span class="text-lg font-bold text-primary-600 leading-none" id="solvedCounter">0</span>
                </div>
                <div class="hidden sm:flex items-center gap-2 text-sm text-slate-500 font-medium bg-slate-100 px-3 py-1.5 rounded-full border border-slate-200">
                    <i data-lucide="infinity" class="w-4 h-4 text-primary-500"></i>
                    Dinamik Soru Motoru
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <!-- Left Column: Strategies -->
        <div class="lg:col-span-6 xl:col-span-5 space-y-6">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-slate-800 flex items-center gap-2">
                    <i data-lucide="book-open" class="text-primary-500"></i>
                    Temel Çeviri Stratejileri
                </h2>
                <p class="text-slate-600 mt-2 text-sm leading-relaxed">
                    Sınavda uzun ve karmaşık cümleleri çözerken kelime kelime çevirmek yerine, cümlenin anatomisini anlamalısınız. İşte en çok hayat kurtaran 4 taktik:
                </p>
            </div>

            <div class="grid grid-cols-1 gap-4">
                <!-- Strategy 1 -->
                <div class="glass-card rounded-xl p-5 strategy-item border-l-4 border-l-primary-500">
                    <h3 class="font-semibold text-slate-800 flex items-center gap-2 text-lg">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-primary-100 text-primary-700 text-xs font-bold">1</span>
                        İskeleti Bulun (Özne + Yüklem)
                    </h3>
                    <p class="text-slate-600 text-sm mt-2 mb-3">
                        İngilizce cümlenin ana öznesini ve ana fiilini tespit edin. Seçeneklerde sadece bu ikilinin doğru eşleştiği şıkları arayarak seçenekleri anında 2'ye indirebilirsiniz.
                    </p>
                    <div class="bg-slate-50 rounded-lg p-3 text-sm border border-slate-100">
                        <p><span class="text-rose-600 font-semibold">The scientist</span> who won the prize <span class="text-blue-600 font-semibold">visited</span> us.</p>
                        <p class="mt-1 text-slate-700">Ödülü kazanan <span class="text-rose-600 font-semibold">bilim insanı</span> bizi <span class="text-blue-600 font-semibold">ziyaret etti</span>.</p>
                    </div>
                </div>

                <!-- Strategy 2 -->
                <div class="glass-card rounded-xl p-5 strategy-item border-l-4 border-l-amber-500">
                    <h3 class="font-semibold text-slate-800 flex items-center gap-2 text-lg">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-amber-100 text-amber-700 text-xs font-bold">2</span>
                        Zaman (Tense) Uyumuna Dikkat
                    </h3>
                    <p class="text-slate-600 text-sm mt-2 mb-3">
                        Orijinal cümledeki zamanın Türkçe karşılığını arayın. Simple Past ("did") ile Past Perfect ("had done") ayrımı çeldiricilerin en sevdiği tuzaktır.
                    </p>
                    <div class="bg-slate-50 rounded-lg p-3 text-sm border border-slate-100 flex flex-col gap-2">
                        <div class="flex items-start gap-2">
                            <i data-lucide="x-circle" class="w-4 h-4 text-rose-500 mt-0.5 shrink-0"></i>
                            <p class="text-slate-600"><span class="line-through">Ziyaret etmişti</span> (had visited karşılığıdır)</p>
                        </div>
                        <div class="flex items-start gap-2">
                            <i data-lucide="check-circle-2" class="w-4 h-4 text-emerald-500 mt-0.5 shrink-0"></i>
                            <p class="text-slate-800 font-medium">Ziyaret etti (visited karşılığıdır)</p>
                        </div>
                    </div>
                </div>

                <!-- Strategy 3 -->
                <div class="glass-card rounded-xl p-5 strategy-item border-l-4 border-l-emerald-500">
                    <h3 class="font-semibold text-slate-800 flex items-center gap-2 text-lg">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-emerald-100 text-emerald-700 text-xs font-bold">3</span>
                        Aktif / Pasif Tuzağı
                    </h3>
                    <p class="text-slate-600 text-sm mt-2 mb-3">
                        Cümle pasif (edilgen) ise, çevirisi de kesinlikle pasif olmalıdır (-ılmak, -ilmek). Özne işi yapan değil, işten etkilenendir.
                    </p>
                    <div class="bg-slate-50 rounded-lg p-3 text-sm border border-slate-100">
                        <p class="font-mono text-xs text-slate-500 mb-1">A new policy HAS BEEN IMPLEMENTED.</p>
                        <p class="text-slate-800">Yeni bir politika <span class="text-emerald-600 font-bold">uygulanmıştır.</span> (Uyguladı YANLIŞ)</p>
                    </div>
                </div>
                
                <!-- Strategy 4 -->
                <div class="glass-card rounded-xl p-5 strategy-item border-l-4 border-l-purple-500">
                    <h3 class="font-semibold text-slate-800 flex items-center gap-2 text-lg">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-purple-100 text-purple-700 text-xs font-bold">4</span>
                        Miktar ve Zarfları Atlamayın
                    </h3>
                    <p class="text-slate-600 text-sm mt-2 mb-3">
                        <i>Only, almost, mainly, considerably, highly</i> gibi kısıtlayıcı veya miktar belirten kelimeler cümlenin bütün anlamını değiştirir. Çeviride mutlaka karşılığı olmalıdır.
                    </p>
                </div>
            </div>
        </div>

        <!-- Right Column: Interactive Quiz Area -->
        <div class="lg:col-span-6 xl:col-span-7 relative">
            <div class="sticky top-24">
                <div class="glass-card rounded-2xl overflow-hidden shadow-lg border border-slate-200/60 flex flex-col min-h-[500px]">
                    
                    <!-- App Header -->
                    <div class="bg-gradient-to-r from-slate-800 to-slate-900 px-6 py-5 text-white flex justify-between items-center">
                        <div>
                            <h2 class="text-lg font-semibold flex items-center gap-2">
                                <i data-lucide="bot" class="w-5 h-5 text-primary-400"></i>
                                Akıllı Soru Simülatörü
                            </h2>
                            <p class="text-slate-300 text-xs mt-1" id="currentTopicLabel">Hazır mısınız?</p>
                        </div>
                    </div>

                    <!-- App Body -->
                    <div class="p-6 flex-grow flex flex-col">
                        
                        <!-- Initial State / Controls -->
                        <div id="controls-area" class="text-center pb-2 mt-auto mb-auto">
                            <div class="mb-6">
                                <div class="w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i data-lucide="infinity" class="w-8 h-8 text-primary-600"></i>
                                </div>
                                <h3 class="text-xl font-bold text-slate-800 mb-2">Sonsuz Soru Döngüsü</h3>
                                <p class="text-slate-500 text-sm max-w-sm mx-auto">Yapay zeka her seferinde farklı bir akademik konu ve dilbilgisi kuralını birleştirerek <strong>benzersiz</strong>, daha önce hiç sorulmamış bir çeviri sorusu üretir.</p>
                            </div>

                            <button id="generateBtn" class="w-full max-w-md mx-auto bg-primary-600 hover:bg-primary-700 text-white font-medium py-3.5 px-4 rounded-xl transition-all shadow-md hover:shadow-lg flex items-center justify-center gap-2 group">
                                <i data-lucide="zap" class="w-5 h-5 group-hover:scale-110 transition-transform"></i>
                                <span id="generateBtnText">İlk Soruyu Üret</span>
                                <div id="btnSpinner" class="loader-spinner hidden ml-2"></div>
                            </button>
                        </div>

                        <!-- Error State -->
                        <div id="error-alert" class="hidden mt-4 bg-rose-50 text-rose-700 p-4 rounded-xl border border-rose-200 text-sm flex items-start gap-3 fade-in">
                            <i data-lucide="alert-triangle" class="w-5 h-5 shrink-0 mt-0.5"></i>
                            <div>
                                <strong class="block font-semibold">Bağlantı Hatası</strong>
                                <span id="error-msg">Soru üretilirken bir sorun oluştu. Lütfen tekrar deneyin.</span>
                            </div>
                        </div>

                        <!-- Quiz Area (Hidden by default) -->
                        <div id="quiz-container" class="hidden fade-in flex-grow flex flex-col">
                            
                            <!-- Question -->
                            <div class="mb-6">
                                <div class="flex items-center gap-2 mb-2">
                                    <span class="bg-slate-100 text-slate-600 text-xs font-bold px-2.5 py-1 rounded-md uppercase tracking-wider border border-slate-200">İngilizce Cümle</span>
                                </div>
                                <p id="q-english" class="text-lg font-medium text-slate-800 leading-relaxed border-l-4 border-primary-400 pl-4 py-1 bg-slate-50/50 rounded-r-lg">
                                    <!-- Sentence goes here -->
                                </p>
                            </div>

                            <!-- Options -->
                            <div class="space-y-3 mb-6" id="options-container">
                                <!-- Options injected via JS -->
                            </div>

                            <!-- Feedback Area -->
                            <div id="feedback-area" class="hidden mt-auto space-y-4 fade-in">
                                <div class="p-4 rounded-xl border" id="feedback-box">
                                    <div class="flex items-center gap-2 mb-2">
                                        <i id="feedback-icon" class="w-5 h-5"></i>
                                        <h4 id="feedback-title" class="font-bold text-sm uppercase tracking-wider"></h4>
                                    </div>
                                    <p id="correct-explanation" class="text-sm mt-3 text-slate-700 leading-relaxed bg-white/60 p-3 rounded-lg border border-slate-100/50 shadow-sm"></p>
                                    <p id="incorrect-explanation" class="text-sm mt-2 text-slate-700 leading-relaxed bg-white/60 p-3 rounded-lg border border-slate-100/50 shadow-sm"></p>
                                </div>
                                
                                <button id="nextBtn" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-medium py-3.5 px-4 rounded-xl transition-colors shadow-md flex items-center justify-center gap-2">
                                    <span>Yeni Rastgele Soru Üret</span>
                                    <i data-lucide="shuffle" class="w-4 h-4"></i>
                                </button>
                            </div>

                        </div>

                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Constants & DOM Elements
        const apiKey = ""; // Managed by Canvas environment
        const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
        
        const btnGenerate = document.getElementById('generateBtn');
        const btnText = document.getElementById('generateBtnText');
        const btnSpinner = document.getElementById('btnSpinner');
        const errorAlert = document.getElementById('error-alert');
        const quizContainer = document.getElementById('quiz-container');
        const optionsContainer = document.getElementById('options-container');
        const englishText = document.getElementById('q-english');
        const feedbackArea = document.getElementById('feedback-area');
        const nextBtn = document.getElementById('nextBtn');
        const controlsArea = document.getElementById('controls-area');
        const solvedCounterEl = document.getElementById('solvedCounter');
        const currentTopicLabel = document.getElementById('currentTopicLabel');
        
        let currentQuizData = null;
        let isGenerating = false;
        let solvedCount = 0;

        // --- INFINITE QUESTION BANK MATRICES ---
        // YDS Topics
        const ydsTopics = [
            "Tıp ve Halk Sağlığı (Medicine & Public Health)",
            "Uzay ve Astronomi (Space & Astronomy)",
            "Tarih ve Antik Uygarlıklar (History & Ancient Civilizations)",
            "Küresel Ekonomi ve Finans (Global Economy & Finance)",
            "Çevre Kirliliği ve İklim Değişikliği (Pollution & Climate Change)",
            "Psikoloji ve İnsan Davranışı (Psychology & Human Behavior)",
            "Yapay Zeka ve Robotik (Artificial Intelligence & Robotics)",
            "Sosyoloji ve Demografi (Sociology & Demographics)",
            "Eğitim Sistemleri ve Öğrenme (Educational Systems & Learning)",
            "Biyoloji ve Genetik Mühendisliği (Biology & Genetic Engineering)",
            "Sanat Tarihi ve Edebiyat (Art History & Literature)",
            "Jeoloji ve Depremler (Geology & Earthquakes)",
            "Uluslararası İlişkiler (International Relations)",
            "Tarım ve Sürdürülebilirlik (Agriculture & Sustainability)",
            "Antropoloji ve İnsan Evrimi (Anthropology & Human Evolution)"
        ];

        // YDS Grammar Focus Areas
        const grammarFocus = [
            "Relative Clauses (Sıfat Cümlecikleri - who, which, that)",
            "Noun Clauses (İsim Cümlecikleri - that, whether, question words)",
            "Passive Voice (Edilgen Yapı, özellikle present perfect veya past perfect passive)",
            "Conditionals (If Cümlecikleri - Mixed tipler dahil)",
            "Participles / Reduction (Kısaltmalar - Ving, V3, having V3)",
            "Conjunctions of Contrast (Zıtlık Bağlaçları - Although, Even though, Despite)",
            "Conjunctions of Cause/Effect (Sebep/Sonuç Bağlaçları - Because, Due to, Therefore)",
            "Infinitive/Gerund structures (Fiilimsi Yapıları)",
            "Complex Quantifiers (Karmaşık Miktar Belirleyiciler - only a few of which, much of etc.)"
        ];

        // Structured Prompt Setup
        const systemPrompt = `You are an expert YDS (Foreign Language Exam in Turkey) English instructor. 
        Your task is to generate a challenging, academic-level English sentence based on the specific TOPIC and GRAMMAR requested, and provide two Turkish translations.
        One translation MUST be perfectly correct.
        The other translation MUST be incorrect but plausible, containing a very common student mistake (e.g., ignoring a passive voice, mistranslating a conjunction like 'although' or 'since', or messing up the tense).
        You must also provide detailed explanations in Turkish for why the correct one is right, and why the incorrect one is wrong (pointing out the specific trap).`;

        const generationConfig = {
            responseMimeType: "application/json",
            responseSchema: {
                type: "OBJECT",
                properties: {
                    english_sentence: { type: "STRING", description: "A complex, academic English sentence (YDS level)." },
                    correct_translation: { type: "STRING", description: "The flawless Turkish translation." },
                    incorrect_translation: { type: "STRING", description: "A plausible but grammatically or semantically flawed Turkish translation." },
                    correct_explanation_tr: { type: "STRING", description: "Turkish explanation of why this translation is structurally correct." },
                    incorrect_explanation_tr: { type: "STRING", description: "Turkish explanation pointing out the specific trap/error in the incorrect translation." }
                },
                required: ["english_sentence", "correct_translation", "incorrect_translation", "correct_explanation_tr", "incorrect_explanation_tr"]
            }
        };

        // Utility: Exponential Backoff Fetch
        async function fetchWithBackoff(payload, retries = 5) {
            let delay = 1000;
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(API_URL, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) throw new Error(`HTTP error: ${response.status}`);
                    
                    const data = await response.json();
                    if (data.candidates && data.candidates[0].content.parts[0].text) {
                        return JSON.parse(data.candidates[0].content.parts[0].text);
                    } else {
                        throw new Error('Invalid API response structure');
                    }
                } catch (err) {
                    if (i === retries - 1) throw err;
                    await new Promise(res => setTimeout(res, delay));
                    delay *= 2;
                }
            }
        }

        // Main Action: Generate Question
        async function handleGenerate() {
            if (isGenerating) return;
            
            // Randomly select Topic and Grammar to ensure infinite unique combinations
            const randomTopic = ydsTopics[Math.floor(Math.random() * ydsTopics.length)];
            const randomGrammar = grammarFocus[Math.floor(Math.random() * grammarFocus.length)];
            
            currentTopicLabel.innerHTML = `Konu: <strong>${randomTopic.split('(')[0]}</strong>`;

            // UI Loading State
            isGenerating = true;
            btnText.textContent = "Soru Üretiliyor...";
            btnSpinner.classList.remove('hidden');
            btnGenerate.classList.add('opacity-80', 'cursor-not-allowed');
            nextBtn.classList.add('opacity-80', 'cursor-wait');
            nextBtn.disabled = true;
            errorAlert.classList.add('hidden');
            
            if (solvedCount === 0) {
                quizContainer.classList.add('hidden');
            } else {
                feedbackArea.classList.add('hidden');
                optionsContainer.innerHTML = '<div class="text-center py-8 text-slate-400"><div class="loader-spinner !border-slate-200 !border-t-primary-500 mx-auto mb-3"></div>Yapay zeka benzersiz bir soru hazırlıyor...</div>';
            }

            const dynamicPrompt = `Create a completely unique YDS translation question.
            CONTEXT THEME: ${randomTopic}
            GRAMMATICAL FOCUS: Ensure the English sentence heavily features and tests: ${randomGrammar}
            
            Make the sentence long, academically rigorous, and ensure it has NOT been generated before. Create the correct and incorrect Turkish translations as instructed in the system prompt.`;

            const payload = {
                contents: [{ parts: [{ text: dynamicPrompt }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] },
                generationConfig: generationConfig
            };

            try {
                const result = await fetchWithBackoff(payload);
                currentQuizData = result;
                renderQuiz(result);
                controlsArea.classList.add('hidden'); // Hide main controls once quiz starts
            } catch (error) {
                console.error("Generation failed:", error);
                errorAlert.classList.remove('hidden');
                optionsContainer.innerHTML = '';
            } finally {
                // UI Reset
                isGenerating = false;
                btnText.textContent = "İlk Soruyu Üret";
                btnSpinner.classList.add('hidden');
                btnGenerate.classList.remove('opacity-80', 'cursor-not-allowed');
                nextBtn.classList.remove('opacity-80', 'cursor-wait');
                nextBtn.disabled = false;
            }
        }

        // Render Quiz to DOM
        function renderQuiz(data) {
            englishText.textContent = data.english_sentence;
            optionsContainer.innerHTML = '';
            
            // Randomize options
            const options = [
                { text: data.correct_translation, isCorrect: true },
                { text: data.incorrect_translation, isCorrect: false }
            ].sort(() => Math.random() - 0.5);

            options.forEach((opt, index) => {
                const btn = document.createElement('button');
                btn.className = "w-full text-left p-4 rounded-xl border-2 border-slate-200 bg-white hover:border-primary-400 hover:bg-primary-50 transition-all font-medium text-slate-700 flex gap-3 group focus:outline-none";
                
                btn.innerHTML = `
                    <div class="w-6 h-6 shrink-0 rounded-full border-2 border-slate-300 flex items-center justify-center text-xs font-bold text-slate-500 group-hover:border-primary-500 group-hover:text-primary-600 transition-colors option-indicator mt-0.5">
                        ${index === 0 ? 'A' : 'B'}
                    </div>
                    <span class="leading-relaxed">${opt.text}</span>
                `;
                
                btn.onclick = () => handleAnswer(btn, opt.isCorrect, options);
                optionsContainer.appendChild(btn);
            });

            quizContainer.classList.remove('hidden');
        }

        // Handle User Answer Selection
        function handleAnswer(selectedBtn, isCorrect, allOptionsData) {
            const allButtons = Array.from(optionsContainer.children);
            
            // Disable all buttons
            allButtons.forEach(btn => {
                btn.disabled = true;
                btn.classList.remove('hover:border-primary-400', 'hover:bg-primary-50', 'cursor-pointer');
            });

            // Highlight Correct and Incorrect
            allButtons.forEach((btn, index) => {
                const isThisCorrect = allOptionsData[index].isCorrect;
                const indicator = btn.querySelector('.option-indicator');
                
                if (isThisCorrect) {
                    btn.classList.add('border-emerald-500', 'bg-emerald-50');
                    indicator.classList.add('bg-emerald-500', 'border-emerald-500', 'text-white');
                    indicator.innerHTML = `<i data-lucide="check" class="w-4 h-4"></i>`;
                } else if (btn === selectedBtn && !isCorrect) {
                    // Selected wrong option
                    btn.classList.add('border-rose-400', 'bg-rose-50');
                    indicator.classList.add('bg-rose-500', 'border-rose-500', 'text-white');
                    indicator.innerHTML = `<i data-lucide="x" class="w-4 h-4"></i>`;
                } else {
                    btn.classList.add('opacity-50');
                }
            });

            lucide.createIcons(); // Refresh icons

            // Update Counter
            solvedCount++;
            solvedCounterEl.textContent = solvedCount;
            // Add a little pop animation to counter
            solvedCounterEl.classList.add('scale-125', 'text-emerald-500');
            setTimeout(() => {
                solvedCounterEl.classList.remove('scale-125', 'text-emerald-500');
            }, 300);

            // Show Feedback
            showFeedback(isCorrect);
        }

        function showFeedback(isCorrect) {
            const fBox = document.getElementById('feedback-box');
            const fIcon = document.getElementById('feedback-icon');
            const fTitle = document.getElementById('feedback-title');
            
            fBox.className = `p-5 rounded-xl border-2 ${isCorrect ? 'bg-emerald-50/50 border-emerald-200' : 'bg-rose-50/50 border-rose-200'}`;
            fIcon.setAttribute('data-lucide', isCorrect ? 'check-circle' : 'x-circle');
            fIcon.className = `w-6 h-6 ${isCorrect ? 'text-emerald-600' : 'text-rose-600'}`;
            fTitle.textContent = isCorrect ? "Tebrikler, Doğru Çeviri!" : "Tuzağa Düştünüz!";
            fTitle.className = `font-bold text-sm uppercase tracking-wider ${isCorrect ? 'text-emerald-700' : 'text-rose-700'}`;

            document.getElementById('correct-explanation').innerHTML = `<strong class="text-emerald-700 block mb-1">✓ Neden Doğru?</strong> ${currentQuizData.correct_explanation_tr}`;
            document.getElementById('incorrect-explanation').innerHTML = `<strong class="text-rose-700 block mb-1">✗ Çeldirici Tuzağı:</strong> ${currentQuizData.incorrect_explanation_tr}`;

            lucide.createIcons();
            feedbackArea.classList.remove('hidden');
            
            // Scroll to feedback
            setTimeout(() => {
                feedbackArea.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }, 100);
        }

        // Event Listeners
        btnGenerate.addEventListener('click', handleGenerate);
        nextBtn.addEventListener('click', handleGenerate);

    </script>
</body>
</html>
